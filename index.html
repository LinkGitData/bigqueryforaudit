<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigQuery ç¶œåˆåˆ†æå¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Unified Light Mode (Slate/Blue/Cyan) -->
    <!-- Application Structure Plan: A tab-based Single Page Application (SPA). The structure is designed to house two distinct user journeys: 1) an interactive dashboard for conceptual understanding, and 2) a linear lab guide for practical application. This tabbed approach was chosen to logically separate these different modes of interaction, allowing a user to easily switch context without leaving the page, thus creating a cohesive and comprehensive learning tool. -->
    <!-- Visualization & Content Choices: 1. Dashboard Tab: Uses Chart.js for an interactive bar chart to dynamically demonstrate the impact of query optimization, making abstract concepts tangible. It also uses styled HTML to represent data storage concepts. 2. Lab Guide Tab: Uses Mermaid.js for a flowchart to provide a clear overview of the lab process, and styled <pre> blocks with copy functionality for user convenience. This combination of tools is chosen to best support the specific goals of each section within the unified application. -->
    <!-- CONFIRMATION: NO SVG graphics used. Mermaid JS is used as required by the lab guide content. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        h1, h2, h3, h4 {
            color: #1e293b; /* slate-800 */
            font-weight: 700;
        }
        .main-tab {
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: color 0.3s, border-color 0.3s;
        }
        .main-tab-active {
            color: #2563eb; /* blue-600 */
            border-bottom-color: #2563eb;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-all;
            position: relative;
        }
        .code-block-light {
            background-color: #f1f5f9;
            color: #1e293b;
            border: 1px solid #e2e8f0;
        }
        
        .lab-guide-section pre, .dashboard-section pre {
            background-color: #1f2937;
            border: 1px solid #374151;
            color: #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
            position: relative;
            overflow-x: auto;
            font-family: monospace;
        }
        .lab-guide-section code, .dashboard-section code {
            background-color: transparent;
            padding: 0;
            margin: 0;
            font-size: 1em;
        }
        .inline-code {
             background-color: #e2e8f0; color: #334155; padding: 0.2em 0.4em; margin: 0; font-size: 0.9em; border-radius: 0.3rem; font-family: monospace;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #4b5563;
            color: #e5e7eb;
            border: none;
            padding: 0.3rem 0.6rem;
            border-radius: 0.3rem;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.2s;
        }
        .copy-btn:hover { background-color: #6b7280; }
        
        .lab-guide-section .mermaid {
            background-color: #f1f5f9; /* slate-100 */
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            justify-content: center;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .lab-guide-section h2 {
            font-size: 1.875rem; /* text-3xl */
            line-height: 2.25rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
        }
        .lab-guide-section h3 {
            font-size: 1.5rem; /* text-2xl */
            line-height: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            border-left: 4px solid #0891b2; /* border-cyan-600 */
            padding-left: 1rem;
        }
         .lab-guide-section h4 {
            font-size: 1.25rem; /* text-xl */
            line-height: 1.75rem;
            font-weight: 600; /* semibold */
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/90 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl py-4">BigQuery ç¶œåˆå¹³å°</h1>
            <div class="hidden md:flex border-b-2 border-slate-200">
                <div id="tab-dashboard" class="main-tab main-tab-active">ğŸ“Š äº’å‹•å¼å„€è¡¨æ¿</div>
                <div id="tab-lab" class="main-tab">ğŸ§ª å¯¦é©—å®¤æŒ‡å—</div>
            </div>
             <button id="mobile-menu-btn" class="md:hidden focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden border-t border-slate-200">
            <div id="mobile-tab-dashboard" class="block py-3 px-4 text-slate-600 bg-slate-100 font-semibold">ğŸ“Š äº’å‹•å¼å„€è¡¨æ¿</div>
            <div id="mobile-tab-lab" class="block py-3 px-4 text-slate-600 hover:bg-slate-100">ğŸ§ª å¯¦é©—å®¤æŒ‡å—</div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8 dashboard-section">

        <!-- Dashboard Content -->
        <div id="dashboard-content">
            <section class="my-12">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl mb-4">é›²ç«¯åŸç”Ÿè³‡æ–™å€‰å„²èˆ‡åˆ†æ</h2>
                    <p class="max-w-3xl mx-auto text-lg text-slate-600">BigQuery æ˜¯ä¸€å€‹å°ˆç‚ºå¤§è¦æ¨¡è³‡æ–™åˆ†æè¨­è¨ˆçš„ç„¡ä¼ºæœå™¨ã€é«˜æ“´å±•æ€§ä¼æ¥­ç´šè³‡æ–™å€‰å„²ã€‚æ­¤å„€è¡¨æ¿å°‡é€éäº’å‹•å¼ç¯„ä¾‹ï¼Œå¸¶æ‚¨äº†è§£å…¶æ¶æ§‹ã€èˆ‡å‚³çµ±è³‡æ–™åº«çš„å·®ç•°ï¼Œä»¥åŠå¦‚ä½•ç™¼æ®æœ€å¤§æ•ˆç›Šã€‚</p>
                </div>
                <div class="card">
                    <h3 class="text-2xl text-center mb-6">æ ¸å¿ƒå®šä½ï¼šOLAP vs. OLTP</h3>
                    <p class="text-center text-slate-500 mb-8">è¦ç†è§£ BigQueryï¼Œé¦–å…ˆå¿…é ˆäº†è§£åˆ†æå‹è³‡æ–™åº« (OLAP) èˆ‡äº¤æ˜“å‹è³‡æ–™åº« (OLTP) çš„æ ¹æœ¬å·®ç•°ã€‚</p>
                    <div class="overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead><tr class="border-b-2 border-slate-200"><th class="p-4 text-sm font-bold uppercase text-slate-500">é …ç›®</th><th class="p-4 text-sm font-bold uppercase text-blue-600 bg-blue-50 rounded-t-lg">BigQuery (OLAP)</th><th class="p-4 text-sm font-bold uppercase text-slate-500">Cloud SQL (OLTP)</th></tr></thead>
                            <tbody class="divide-y divide-slate-200">
                                <tr><td class="p-4 font-semibold">æ¶æ§‹é¡å‹</td><td class="p-4 bg-blue-50">åˆ†æå‹è³‡æ–™å€‰å„²</td><td class="p-4">å‚³çµ±é—œè¯å¼è³‡æ–™åº«</td></tr>
                                <tr><td class="p-4 font-semibold">é©ç”¨å ´æ™¯</td><td class="p-4 bg-blue-50">å¤§é‡è³‡æ–™åˆ†æã€å ±è¡¨ã€BI</td><td class="p-4">æ‡‰ç”¨ç³»çµ±å¾Œç«¯ã€äº¤æ˜“è™•ç†</td></tr>
                                <tr><td class="p-4 font-semibold">æŸ¥è©¢å»¶é²</td><td class="p-4 bg-blue-50">ç§’ç´šè‡³åˆ†é˜ç´š</td><td class="p-4">æ¯«ç§’ç´š</td></tr>
                                <tr><td class="p-4 font-semibold">è³‡æ–™è¦æ¨¡</td><td class="p-4 bg-blue-50">TB ~ PB ç´š</td><td class="p-4">GB ~ TB ç´š</td></tr>
                                <tr><td class="p-4 font-semibold">ç¶­è­·</td><td class="p-4 bg-blue-50 rounded-b-lg">å…¨è‡ªå‹•åŒ–ï¼Œç„¡ä¼ºæœå™¨</td><td class="p-4">éœ€æ‰‹å‹•ç®¡ç†å¯¦ä¾‹</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section class="my-16">
                <div class="text-center mb-12"><h2 class="text-3xl md:text-4xl mb-4">æ•ˆèƒ½èˆ‡æˆæœ¬å„ªåŒ–å¯¦æˆ°</h2><p class="max-w-3xl mx-auto text-lg text-slate-600">BigQuery çš„æ ¸å¿ƒåƒ¹å€¼åœ¨æ–¼å…¶å„ªåŒ–æŸ¥è©¢çš„èƒ½åŠ›ã€‚ä»¥ä¸‹å°‡ä»‹ç´¹å¹¾ç¨®é—œéµæŠ€è¡“ï¼Œä¸¦é€éäº’å‹•åœ–è¡¨å±•ç¤ºå…¶é©šäººæ•ˆæœã€‚</p></div>
                
                <div class="card mb-8">
                    <h3 class="text-2xl mb-4">åˆ†å€è¡¨ & å¢é›†è¡¨</h3>
                    <p class="mb-6 text-slate-600">åˆ†å€ (Partitioning) æ˜¯å°‡è³‡æ–™è¡¨ä¾æ™‚é–“ç­‰æ¬„ä½åˆ‡æˆå°å¡Šï¼ŒæŸ¥è©¢æ™‚åªæƒæç›¸é—œå€å¡Šã€‚å¢é›† (Clustering) å‰‡æ˜¯åœ¨åˆ†å€å…§éƒ¨ï¼Œå°‡ç›¸ä¼¼å€¼çš„è³‡æ–™å¯¦é«”å­˜æ”¾åœ¨ä¸€èµ·ã€‚å…©è€…çµåˆèƒ½å¤§å¹…é™ä½æƒæé‡èˆ‡æˆæœ¬ã€‚</p>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="font-semibold text-lg mb-4">äº’å‹•æ¨¡æ“¬ï¼šé¸æ“‡æŸ¥è©¢ç­–ç•¥</h4>
                            <div class="flex flex-wrap gap-3 mb-6">
                                <button data-query="full" class="px-4 py-2 text-sm font-semibold bg-red-500 text-white rounded-lg shadow-md hover:bg-red-600 transition">å…¨è¡¨æƒæ</button>
                                <button data-query="partition" class="px-4 py-2 text-sm font-semibold bg-yellow-500 text-white rounded-lg shadow-md hover:bg-yellow-600 transition">åƒ…ç”¨åˆ†å€</button>
                                <button data-query="cluster" class="px-4 py-2 text-sm font-semibold bg-green-500 text-white rounded-lg shadow-md hover:bg-green-600 transition">åˆ†å€ + å¢é›†</button>
                            </div>
                            <div id="query-explanation" class="bg-slate-100 p-4 rounded-lg"></div>
                        </div>
                        <div><div class="chart-container"><canvas id="optimizationChart"></canvas></div></div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <h3 class="text-2xl mb-4">éæ­£è¦åŒ–èˆ‡å·¢ç‹€æ¬„ä½</h3>
                        <p class="mb-4 text-slate-600">ç‚ºé¿å…åˆ†æ•£å¼ç³»çµ±ä¸­æ˜‚è²´çš„ JOIN æ“ä½œï¼ŒBigQuery é¼“å‹µå°‡è³‡æ–™ã€Œé å…ˆçµ„åˆã€ã€‚ä½¿ç”¨ <code class="inline-code">STRUCT</code> (ç‰©ä»¶) å’Œ <code class="inline-code">ARRAY</code> (é™£åˆ—) ä¾†è™•ç†ä¸€å°å¤šé—œä¿‚ï¼Œæ˜¯æå‡æ•ˆèƒ½çš„é—œéµã€‚</p>
                        <p class="mb-2 font-semibold">å„²å­˜æ¨£è²Œï¼š</p>
                        <div class="code-block code-block-light text-sm">
                            <p><b>user_id:</b> 'user_A'</p>
                            <p><b>cart:</b> [</p>
                            <p class="ml-4">{<b>product_id:</b> 'P101', <b>qty:</b> 1},</p>
                            <p class="ml-4">{<b>product_id:</b> 'P203', <b>qty:</b> 2}</p>
                            <p>]</p>
                        </div>
                        <p class="mt-4 mb-2 font-semibold">æŸ¥è©¢æ–¹å¼ (<code class="inline-code">UNNEST</code>)ï¼š</p>
                        <pre><code>SELECT user_id, item.product_id, item.qty
FROM carts, UNNEST(cart) AS item;</code></pre>
                        <p class="mt-4 mb-2 font-semibold">æŸ¥è©¢çµæœï¼š</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-slate-100"><tr><th class="p-2">user_id</th><th class="p-2">product_id</th><th class="p-2">qty</th></tr></thead>
                                <tbody>
                                    <tr class="border-b"><td class="p-2">user_A</td><td class="p-2">P101</td><td class="p-2">1</td></tr>
                                    <tr class="border-b"><td class="p-2">user_A</td><td class="p-2">P203</td><td class="p-2">2</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="text-2xl mb-4">ç‰©åŒ–æª¢è¦–è¡¨</h3>
                        <p class="mb-4 text-slate-600">å°æ–¼é‡è¤‡æ€§é«˜ã€è¨ˆç®—æˆæœ¬ä¹Ÿé«˜çš„æŸ¥è©¢ï¼Œå¯ä»¥å»ºç«‹ç‰©åŒ–æª¢è¦–è¡¨ (Materialized View)ã€‚BigQuery æœƒè‡ªå‹•é å…ˆè¨ˆç®—ä¸¦å¿«å–çµæœï¼Œç•¶åº•å±¤è³‡æ–™è®Šå‹•æ™‚ä¹Ÿæœƒæ™ºæ…§æ›´æ–°ï¼Œè®“å¾ŒçºŒæŸ¥è©¢èƒ½ä»¥æ¥µå¿«é€Ÿåº¦å›æ‡‰ã€‚</p>
                        <p class="mb-2 font-semibold">é©ç”¨å ´æ™¯ï¼š</p>
                        <ul class="list-disc list-inside text-slate-600 space-y-1">
                            <li>å¸¸ç”¨çš„ BI å„€è¡¨æ¿æ‘˜è¦è³‡æ–™ã€‚</li>
                            <li>éœ€è¦é å…ˆèšåˆçš„è¤‡é›œæŸ¥è©¢ã€‚</li>
                            <li>å°æŸ¥è©¢å»¶é²æœ‰åš´æ ¼è¦æ±‚çš„æ‡‰ç”¨ã€‚</li>
                        </ul>
                         <p class="mt-4 mb-2 font-semibold">ç¯„ä¾‹ï¼š</p>
                         <pre><code>CREATE MATERIALIZED VIEW mv_hourly_sales AS
SELECT
  TIMESTAMP_TRUNC(time, HOUR) as hour,
  SUM(amount) AS total_sales
FROM transactions
GROUP BY 1;</code></pre>
                    </div>
                </div>
            </section>
            
            <section class="my-16">
                <div class="text-center mb-12"><h2 class="text-3xl md:text-4xl mb-4">è³‡æ–™ä¿è­·èˆ‡ç”Ÿæ…‹ç³»</h2><p class="max-w-3xl mx-auto text-lg text-slate-600">äº†è§£ BigQuery çš„å…§å»ºä¿è­·æ©Ÿåˆ¶ï¼Œä»¥åŠå¦‚ä½•èˆ‡å…¶ä»–å·¥å…·æ•´åˆä¸¦é¸æ“‡æœ€é©åˆæ‚¨çš„æˆæœ¬æ–¹æ¡ˆã€‚</p></div>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <h3 class="text-2xl mb-4">è³‡æ–™å›å¾©ï¼šæ™‚é–“æ—…è¡Œ (Time Travel)</h3>
                        <p class="mb-4 text-slate-600">BigQuery æœƒè‡ªå‹•ä¿ç•™éå» 7 å¤©å…§æ‰€æœ‰è³‡æ–™è¡¨çš„æ­·å²ç‰ˆæœ¬ã€‚è‹¥ä¸æ…èª¤åˆªæˆ–ä¿®æ”¹è³‡æ–™ï¼Œå¯ä½¿ç”¨ <code class="inline-code">FOR SYSTEM_TIME AS OF</code> èªæ³•ï¼Œè¼•é¬†æŸ¥è©¢ç‰¹å®šæ™‚é–“é»çš„è³‡æ–™ä¸¦é€²è¡Œé‚„åŸã€‚</p>
                        <p class="mb-2 font-semibold">å›å¾©æƒ…å¢ƒç¯„ä¾‹ï¼š</p>
                        <ol class="list-decimal list-inside text-slate-600 space-y-2">
                            <li><span class="font-semibold text-red-600">éŒ¯èª¤æ“ä½œï¼š</span>ä¸å°å¿ƒæ›´æ–°äº†æ‰€æœ‰å“¡å·¥çš„è–ªè³‡ã€‚
                                <pre class="mt-1"><code>-- éŒ¯èª¤ï¼å¿˜è¨˜åŠ  WHERE æ¢ä»¶
UPDATE employees SET salary = 50000;</code></pre>
                            </li>
                            <li><span class="font-semibold text-green-600">æ•‘æ´æŸ¥è©¢ï¼š</span>æŸ¥è©¢ä¸€å°æ™‚å‰çš„è³‡æ–™ç‹€æ…‹ã€‚
                                <pre class="mt-1"><code>SELECT * FROM employees
FOR SYSTEM_TIME AS OF
TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 HOUR);</code></pre>
                            </li>
                        </ol>
                    </div>
                     <div class="card">
                        <h3 class="text-2xl mb-4">BI Engine & æˆæœ¬æ–¹æ¡ˆ</h3>
                        <p class="mb-4 text-slate-600"><strong>BI Engine</strong> æ˜¯ä¸€å€‹é«˜é€Ÿçš„è¨˜æ†¶é«”å…§åˆ†ææœå‹™ï¼Œèƒ½ç‚º Looker ç­‰ BI å·¥å…·æä¾›äºç§’ç´šçš„æŸ¥è©¢å»¶é²ã€‚</p>
                        <p class="mb-4 text-slate-600">æ ¹æ“šæ‚¨çš„æŸ¥è©¢è² è¼‰é¡å‹ï¼Œé¸æ“‡æœ€åˆ’ç®—çš„è¨ˆè²»æ¨¡å¼ï¼š</p>
                        <div class="flex items-center space-x-4 mb-4">
                            <span class="text-slate-500">å¶ç™¼/æ¢ç´¢æ€§</span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="cost-toggle" class="sr-only peer">
                                <div class="w-14 h-7 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                             <span class="text-slate-500">ç©©å®š/é«˜ä½µç™¼</span>
                        </div>
                        <div id="cost-recommendation" class="bg-slate-100 p-4 rounded-lg transition-all duration-300">
                             <h4 class="font-semibold mb-2 text-yellow-800">æ¨è–¦ï¼šéš¨ç”¨éš¨ä»˜ (On-Demand)</h4>
                             <p class="text-sm text-slate-600">é©ç”¨æ–¼æŸ¥è©¢é‡ä¸å›ºå®šã€è‡¨æ™‚æ€§çš„åˆ†æä»»å‹™ã€‚æ‚¨åªéœ€ç‚ºæƒæçš„è³‡æ–™é‡ä»˜è²»ã€‚</p>
                        </div>
                    </div>
                 </div>
            </section>
        </div>

        <!-- Lab Guide Content -->
        <div id="lab-guide-content" class="hidden lab-guide-section">
             <header class="my-8 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-2 text-cyan-600">å¯¦é©—å®¤æŒ‡å— ğŸ“Š</h2>
                <p class="text-xl text-slate-600">ä½¿ç”¨ BigQuery èˆ‡ Cloud Logging åˆ†æ BigQuery ä½¿ç”¨æƒ…æ³</p>
                <p class="mt-4 text-slate-500 max-w-3xl mx-auto">æœ¬æŒ‡å—å°‡å¼•å°æ‚¨å¦‚ä½•åˆ©ç”¨ Cloud Logging ä¾†æª¢è¦– BigQuery çš„ä½¿ç”¨æ—¥èªŒï¼Œä¸¦è¨­å®šä¸€å€‹åŒ¯å‡ºæ§½ (sink)ï¼Œå°‡é€™äº›æ—¥èªŒæ°¸ä¹…å„²å­˜åˆ° BigQuery ä¸­é€²è¡Œé•·æœŸåˆ†æã€‚</p>
            </header>

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">å¯¦é©—æµç¨‹åœ–</h3>
                <div class="mermaid">
                graph TD
                    A[ğŸš€ ä»»å‹™ 3: åŸ·è¡ŒæŸ¥è©¢ä»¥ç”¢ç”Ÿæ—¥èªŒ] --> B[ğŸ“ ä»»å‹™ 4: å‰å¾€ Cloud Logging å°‹æ‰¾æ—¥èªŒ];
                    B --> C[ğŸ”§ ä»»å‹™ 4: å»ºç«‹åŒ¯å‡ºæ§½(Sink)å°‡æ—¥èªŒåŒ¯å‡ºè‡³ BigQuery];
                    C --> D[ğŸ”„ ä»»å‹™ 5: åŸ·è¡Œæ›´å¤šç¯„ä¾‹æŸ¥è©¢ä»¥ç”¢ç”Ÿæ–°æ—¥èªŒ];
                    D --> E[ğŸ‘ï¸ ä»»å‹™ 6: å›åˆ° BigQuery æª¢è¦–åŒ¯å…¥çš„æ—¥èªŒ];
                    E --> F[âœ¨ ä»»å‹™ 6: å»ºç«‹ä¸€å€‹ VIEW ä¾†ç°¡åŒ–æ—¥èªŒè³‡æ–™];
                    F --> G[ğŸ“ˆ ä»»å‹™ 6: æŸ¥è©¢ VIEW ä»¥åˆ†æä½¿ç”¨æƒ…æ³];
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">ä»»å‹™ 1 & 2ï¼šå‰ç½®ä½œæ¥­èˆ‡å»ºç«‹è³‡æ–™é›†</h3>
                <p class="mb-4 text-slate-500">é¦–å…ˆï¼Œæˆ‘å€‘éœ€è¦ä¸€å€‹åœ°æ–¹ä¾†å­˜æ”¾å¾ Cloud Logging åŒ¯å‡ºçš„æ—¥èªŒã€‚</p>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl mb-2">1. é–‹å•Ÿ BigQuery</h4>
                        <p>åœ¨ Google Cloud Console ä¸­ï¼Œé€éå°è¦½é¸å–® (<strong>Navigation menu</strong>) é€²å…¥ <strong>BigQuery</strong>ã€‚</p>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">2. å»ºç«‹è³‡æ–™é›† (Dataset)</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>åœ¨ <strong>Explorer</strong> é¢æ¿ä¸­ï¼Œæ‰¾åˆ°æ‚¨çš„å°ˆæ¡ˆ (åç¨±ä»¥ <code>qwiklabs-gcp-</code> é–‹é ­)ï¼Œé»æ“Šæ—é‚Šçš„ä¸‰å€‹é»ã€‚</li>
                            <li>é¸æ“‡ <strong>Create dataset</strong>ã€‚</li>
                            <li>è¨­å®š <strong>Dataset ID</strong> ç‚º <code>bq_logs</code>ã€‚</li>
                            <li>é»æ“Š <strong>Create Dataset</strong>ã€‚</li>
                        </ol>
                    </div>
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">ä»»å‹™ 3ï¼šåŸ·è¡Œä¸€ç­†æŸ¥è©¢ä»¥ç”¢ç”Ÿç´€éŒ„</h3>
                <p class="mb-4 text-slate-500">ç‚ºäº†è®“æˆ‘å€‘åœ¨ Cloud Logging ä¸­èƒ½çœ‹åˆ°æ±è¥¿ï¼Œå…ˆä¾†åŸ·è¡Œä¸€ç­†ç°¡å–®çš„æŸ¥è©¢ã€‚</p>
                <ol class="list-decimal list-inside space-y-2 pl-4 mb-4 text-slate-600">
                    <li>å°‡ä»¥ä¸‹æŸ¥è©¢è¤‡è£½ä¸¦è²¼åˆ° BigQuery <strong>æŸ¥è©¢ç·¨è¼¯å™¨ (Query editor)</strong> ä¸­ï¼š</li>
                </ol>
                <pre><code>SELECT current_date</code></pre>
                <ol class="list-decimal list-inside space-y-2 pl-4 mt-4 text-slate-600" start="2">
                    <li>é»æ“Š <strong>RUN</strong>ã€‚</li>
                </ol>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">ä»»å‹™ 4ï¼šè¨­å®šå¾ Cloud Logging åŒ¯å‡ºæ—¥èªŒ</h3>
                <p class="mb-4 text-slate-500">ç¾åœ¨ï¼Œæˆ‘å€‘å°‡è¨­å®šä¸€å€‹ã€ŒåŒ¯å‡ºæ§½ã€(Sink)ï¼Œå®ƒæœƒè‡ªå‹•æŠŠç¬¦åˆæ¢ä»¶çš„æ—¥èªŒå¾ Cloud Logging å‚³é€åˆ°æˆ‘å€‘å‰›å»ºç«‹çš„ BigQuery è³‡æ–™é›†ã€‚</p>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl mb-2">1. å‰å¾€ Logs Explorer</h4>
                        <p>åœ¨å°è¦½é¸å–®ä¸­ï¼Œé¸æ“‡ <strong>Logging > Logs Explorer</strong>ã€‚</p>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">2. ç¯©é¸ BigQuery æ—¥èªŒ</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>åœ¨ <strong>Resource</strong> ä¸‹æ‹‰é¸å–®ä¸­ï¼Œé¸æ“‡ <strong>BigQuery</strong>ï¼Œç„¶å¾Œé»æ“Š <strong>Apply</strong>ã€‚</li>
                            <li>é»æ“Šå³ä¸Šè§’çš„ <strong>Run query</strong>ã€‚æ‚¨æ‡‰è©²æœƒçœ‹åˆ°å‰›å‰›åŸ·è¡ŒæŸ¥è©¢æ‰€ç”¢ç”Ÿçš„æ—¥èªŒã€‚</li>
                            <li>æ‰¾åˆ°åŒ…å« <code class="inline-code">jobservice.jobcompleted</code> çš„æ—¥èªŒæ¢ç›®ï¼Œé»æ“Šå®ƒï¼Œç„¶å¾Œé¸æ“‡ <strong>Show matching entries</strong>ã€‚é€™æœƒè‡ªå‹•å¹«æ‚¨è¨­å®šå¥½ç¯©é¸æ¢ä»¶ã€‚</li>
                        </ol>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">3. å»ºç«‹åŒ¯å‡ºæ§½ (Create Sink)</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>åœ¨å³ä¸Šè§’çš„ <strong>Actions</strong> ä¸‹æ‹‰é¸å–®ä¸­ï¼Œé»æ“Š <strong>Create sink</strong>ã€‚</li>
                            <li><strong>Sink name</strong>: è¼¸å…¥ <code>JobComplete</code>ï¼Œç„¶å¾Œé»æ“Š <strong>NEXT</strong>ã€‚</li>
                            <li><strong>Select sink service</strong>: é¸æ“‡ <strong>BigQuery dataset</strong>ã€‚</li>
                            <li><strong>Select BigQuery dataset (Destination)</strong>: é¸æ“‡æˆ‘å€‘å‰›å‰›å»ºç«‹çš„ <code>bq_logs</code>ã€‚</li>
                            <li>ä¿ç•™å…¶é¤˜è¨­å®šç‚ºé è¨­å€¼ï¼Œé»æ“Š <strong>Create Sink</strong>ã€‚</li>
                        </ol>
                    </div>
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">ä»»å‹™ 5ï¼šåŸ·è¡Œç¯„ä¾‹æŸ¥è©¢ä»¥å¡«å……æ—¥èªŒ</h3>
                <p class="mb-4 text-slate-500">ç‚ºäº†è®“æ–°çš„æ—¥èªŒä¸­æœ‰è³‡æ–™å¯ä¾›åˆ†æï¼Œè«‹åŸ·è¡Œä»¥ä¸‹å¹¾å€‹æŸ¥è©¢ã€‚</p>
                <ol class="list-decimal list-inside space-y-2 pl-4 mb-4 text-slate-600">
                    <li>é–‹å•Ÿ <strong>Cloud Shell</strong>ã€‚</li>
                    <li>å°‡ä»¥ä¸‹ <code>bq</code> æŒ‡ä»¤<strong>é€ä¸€</strong>è¤‡è£½è²¼ä¸Šåˆ° Cloud Shell ä¸­ä¸¦åŸ·è¡Œã€‚</li>
                </ol>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-lg font-semibold">æŸ¥è©¢ä¸€ï¼š</h4>
                        <pre><code>bq query --location=us --use_legacy_sql=false --use_cache=false 'SELECT fullName, AVG(CL.numberOfYears) avgyears FROM `qwiklabs-resources.qlbqsamples.persons_living`, UNNEST(citiesLived) as CL GROUP BY fullname'</code></pre>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold">æŸ¥è©¢äºŒï¼š</h4>
                        <pre><code>bq query --location=us --use_legacy_sql=false --use_cache=false 'select month, avg(mean_temp) as avgtemp from `qwiklabs-resources.qlweather_geo.gsod` where station_number = 947680 and year = 2010 group by month order by month'</code></pre>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold">æŸ¥è©¢ä¸‰ï¼š</h4>
                        <pre><code>bq query --location=us --use_legacy_sql=false --use_cache=false 'select CONCAT(departure_airport, "-", arrival_airport) as route, count(*) as numberflights from `bigquery-samples.airline_ontime_data.airline_id_codes` ac, `qwiklabs-resources.qlairline_ontime_data.flights` fl where ac.code = fl.airline_code and regexp_contains(ac.airline , r"Alaska") group by 1 order by 2 desc LIMIT 10'</code></pre>
                    </div>
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">ä»»å‹™ 6ï¼šåœ¨ BigQuery ä¸­æª¢è¦–èˆ‡åˆ†ææ—¥èªŒ</h3>
                <p class="mb-4 text-slate-500">æ—¥èªŒå·²ç¶“é€é Sink é€²å…¥ BigQueryï¼Œç¾åœ¨è®“æˆ‘å€‘ä¾†çœ‹çœ‹æˆæœã€‚</p>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl mb-2">1. å°‹æ‰¾æ—¥èªŒè³‡æ–™è¡¨</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>å›åˆ° <strong>BigQuery</strong> ä»‹é¢ã€‚</li>
                            <li>åœ¨ <strong>Explorer</strong> é¢æ¿ä¸­ï¼Œå±•é–‹æ‚¨çš„å°ˆæ¡ˆåŠ <code>bq_logs</code> è³‡æ–™é›†ã€‚</li>
                            <li>æ‚¨æœƒçœ‹åˆ°ä¸€å€‹æ–°å»ºç«‹çš„è³‡æ–™è¡¨ï¼Œåç¨±é¡ä¼¼ <code class="inline-code">cloudaudit_googleapis_com_data_access_...</code>ã€‚</li>
                            <li class="text-amber-600"><strong>æ³¨æ„ï¼š</strong> æ—¥èªŒæ˜¯é€éä¸²æµæ–¹å¼å¯«å…¥çš„ï¼Œæ‰€ä»¥é»æ“Š <strong>Preview</strong> å¯èƒ½æš«æ™‚çœ‹ä¸åˆ°æœ€æ–°è³‡æ–™ï¼Œä½†è³‡æ–™å·²ç¶“å¯ä»¥è¢«æŸ¥è©¢ã€‚</li>
                        </ol>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">2. å»ºç«‹ VIEW ç°¡åŒ–è³‡æ–™</h4>
                        <p class="mb-4 text-slate-500">åŸå§‹çš„æ—¥èªŒè³‡æ–™è¡¨æ¬„ä½éå¸¸å¤šä¸”è¤‡é›œã€‚ç‚ºäº†æ–¹ä¾¿åˆ†æï¼Œæˆ‘å€‘å»ºç«‹ä¸€å€‹ <strong>VIEW (æª¢è¦–è¡¨)</strong> ä¾†æŠ½å–é‡è¦æ¬„ä½ä¸¦åšä¸€äº›åŸºæœ¬è¨ˆç®—ã€‚</p>
                        <ol class="list-decimal list-inside space-y-2 pl-4 mb-4 text-slate-600">
                            <li>é»æ“Š <strong>+ (Compose new query)</strong>ï¼Œè²¼ä¸Šä¸¦åŸ·è¡Œä»¥ä¸‹ SQLï¼š</li>
                        </ol>
                        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 mb-4" role="alert">
                          <p class="font-bold">âš ï¸ é‡è¦æç¤ºï¼š</p>
                          <p>è«‹å‹™å¿…å°‡ <code class="inline-code">`Project ID.bq_logs...`</code> ä¸­çš„ <code>Project ID</code> æ›¿æ›ç‚ºæ‚¨å¯¦é©—å®¤çš„<strong>å¯¦éš›å°ˆæ¡ˆ ID</strong>ã€‚</p>
                        </div>
                        <pre><code class="language-sql">CREATE OR REPLACE VIEW
  bq_logs.v_querylogs AS
SELECT
  resource.labels.project_id,
  protopayload_auditlog.authenticationInfo.principalEmail,
  protopayload_auditlog.servicedata_v1_bigquery.jobCompletedEvent.job.jobConfiguration.query.query,
  protopayload_auditlog.servicedata_v1_bigquery.jobCompletedEvent.job.jobConfiguration.query.statementType,
  protopayload_auditlog.servicedata_v1_bigquery.jobCompletedEvent.job.jobStatus.error.message,
  protopayload_auditlog.servi