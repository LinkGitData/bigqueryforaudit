<!DOCTYPE html>
<html lang="zh-Hant" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BigQuery 綜合分析平台</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Unified Light Mode (Slate/Blue/Cyan) -->
    <!-- Application Structure Plan: A tab-based Single Page Application (SPA). The structure is designed to house two distinct user journeys: 1) an interactive dashboard for conceptual understanding, and 2) a linear lab guide for practical application. This tabbed approach was chosen to logically separate these different modes of interaction, allowing a user to easily switch context without leaving the page, thus creating a cohesive and comprehensive learning tool. -->
    <!-- Visualization & Content Choices: 1. Dashboard Tab: Uses Chart.js for an interactive bar chart to dynamically demonstrate the impact of query optimization, making abstract concepts tangible. It also uses styled HTML to represent data storage concepts. 2. Lab Guide Tab: Uses Mermaid.js for a flowchart to provide a clear overview of the lab process, and styled <pre> blocks with copy functionality for user convenience. This combination of tools is chosen to best support the specific goals of each section within the unified application. -->
    <!-- CONFIRMATION: NO SVG graphics used. Mermaid JS is used as required by the lab guide content. -->
    <style>
        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #334155; /* slate-700 */
        }
        h1, h2, h3, h4 {
            color: #1e293b; /* slate-800 */
            font-weight: 700;
        }
        .main-tab {
            cursor: pointer;
            padding: 0.75rem 1.5rem;
            font-weight: 600;
            border-bottom: 3px solid transparent;
            transition: color 0.3s, border-color 0.3s;
        }
        .main-tab-active {
            color: #2563eb; /* blue-600 */
            border-bottom-color: #2563eb;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) { .chart-container { height: 350px; } }
        
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            padding: 1rem;
            border-radius: 0.5rem;
            font-family: monospace;
            white-space: pre-wrap;
            word-break: break-all;
            position: relative;
        }
        .code-block-light {
            background-color: #f1f5f9;
            color: #1e293b;
            border: 1px solid #e2e8f0;
        }
        
        .lab-guide-section pre, .dashboard-section pre {
            background-color: #1f2937;
            border: 1px solid #374151;
            color: #d1d5db;
            border-radius: 0.5rem;
            padding: 1rem;
            position: relative;
            overflow-x: auto;
            font-family: monospace;
        }
        .lab-guide-section code, .dashboard-section code {
            background-color: transparent;
            padding: 0;
            margin: 0;
            font-size: 1em;
        }
        .inline-code {
             background-color: #e2e8f0; color: #334155; padding: 0.2em 0.4em; margin: 0; font-size: 0.9em; border-radius: 0.3rem; font-family: monospace;
        }

        .copy-btn {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            background-color: #4b5563;
            color: #e5e7eb;
            border: none;
            padding: 0.3rem 0.6rem;
            border-radius: 0.3rem;
            cursor: pointer;
            font-size: 0.8rem;
            transition: background-color 0.2s;
        }
        .copy-btn:hover { background-color: #6b7280; }
        
        .lab-guide-section .mermaid {
            background-color: #f1f5f9; /* slate-100 */
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            justify-content: center;
        }
        .card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem 2rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        .lab-guide-section h2 {
            font-size: 1.875rem; /* text-3xl */
            line-height: 2.25rem;
            font-weight: 700;
            margin-bottom: 2rem;
            text-align: center;
        }
        .lab-guide-section h3 {
            font-size: 1.5rem; /* text-2xl */
            line-height: 2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            border-left: 4px solid #0891b2; /* border-cyan-600 */
            padding-left: 1rem;
        }
         .lab-guide-section h4 {
            font-size: 1.25rem; /* text-xl */
            line-height: 1.75rem;
            font-weight: 600; /* semibold */
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/90 backdrop-blur-sm shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 flex justify-between items-center">
            <h1 class="text-xl md:text-2xl py-4">BigQuery 綜合平台</h1>
            <div class="hidden md:flex border-b-2 border-slate-200">
                <div id="tab-dashboard" class="main-tab main-tab-active">📊 互動式儀表板</div>
                <div id="tab-lab" class="main-tab">🧪 實驗室指南</div>
            </div>
             <button id="mobile-menu-btn" class="md:hidden focus:outline-none">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <div id="mobile-menu" class="hidden md:hidden border-t border-slate-200">
            <div id="mobile-tab-dashboard" class="block py-3 px-4 text-slate-600 bg-slate-100 font-semibold">📊 互動式儀表板</div>
            <div id="mobile-tab-lab" class="block py-3 px-4 text-slate-600 hover:bg-slate-100">🧪 實驗室指南</div>
        </div>
    </header>

    <main class="container mx-auto p-4 md:p-8 dashboard-section">

        <!-- Dashboard Content -->
        <div id="dashboard-content">
            <section class="my-12">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl mb-4">雲端原生資料倉儲與分析</h2>
                    <p class="max-w-3xl mx-auto text-lg text-slate-600">BigQuery 是一個專為大規模資料分析設計的無伺服器、高擴展性企業級資料倉儲。此儀表板將透過互動式範例，帶您了解其架構、與傳統資料庫的差異，以及如何發揮最大效益。</p>
                </div>
                <div class="card">
                    <h3 class="text-2xl text-center mb-6">核心定位：OLAP vs. OLTP</h3>
                    <p class="text-center text-slate-500 mb-8">要理解 BigQuery，首先必須了解分析型資料庫 (OLAP) 與交易型資料庫 (OLTP) 的根本差異。</p>
                    <div class="overflow-x-auto">
                        <table class="w-full min-w-max text-left border-collapse">
                            <thead><tr class="border-b-2 border-slate-200"><th class="p-4 text-sm font-bold uppercase text-slate-500">項目</th><th class="p-4 text-sm font-bold uppercase text-blue-600 bg-blue-50 rounded-t-lg">BigQuery (OLAP)</th><th class="p-4 text-sm font-bold uppercase text-slate-500">Cloud SQL (OLTP)</th></tr></thead>
                            <tbody class="divide-y divide-slate-200">
                                <tr><td class="p-4 font-semibold">架構類型</td><td class="p-4 bg-blue-50">分析型資料倉儲</td><td class="p-4">傳統關聯式資料庫</td></tr>
                                <tr><td class="p-4 font-semibold">適用場景</td><td class="p-4 bg-blue-50">大量資料分析、報表、BI</td><td class="p-4">應用系統後端、交易處理</td></tr>
                                <tr><td class="p-4 font-semibold">查詢延遲</td><td class="p-4 bg-blue-50">秒級至分鐘級</td><td class="p-4">毫秒級</td></tr>
                                <tr><td class="p-4 font-semibold">資料規模</td><td class="p-4 bg-blue-50">TB ~ PB 級</td><td class="p-4">GB ~ TB 級</td></tr>
                                <tr><td class="p-4 font-semibold">維護</td><td class="p-4 bg-blue-50 rounded-b-lg">全自動化，無伺服器</td><td class="p-4">需手動管理實例</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>
            
            <section class="my-16">
                <div class="text-center mb-12"><h2 class="text-3xl md:text-4xl mb-4">效能與成本優化實戰</h2><p class="max-w-3xl mx-auto text-lg text-slate-600">BigQuery 的核心價值在於其優化查詢的能力。以下將介紹幾種關鍵技術，並透過互動圖表展示其驚人效果。</p></div>
                
                <div class="card mb-8">
                    <h3 class="text-2xl mb-4">分區表 & 叢集表</h3>
                    <p class="mb-6 text-slate-600">分區 (Partitioning) 是將資料表依時間等欄位切成小塊，查詢時只掃描相關區塊。叢集 (Clustering) 則是在分區內部，將相似值的資料實體存放在一起。兩者結合能大幅降低掃描量與成本。</p>
                    <div class="grid md:grid-cols-2 gap-8 items-center">
                        <div>
                            <h4 class="font-semibold text-lg mb-4">互動模擬：選擇查詢策略</h4>
                            <div class="flex flex-wrap gap-3 mb-6">
                                <button data-query="full" class="px-4 py-2 text-sm font-semibold bg-red-500 text-white rounded-lg shadow-md hover:bg-red-600 transition">全表掃描</button>
                                <button data-query="partition" class="px-4 py-2 text-sm font-semibold bg-yellow-500 text-white rounded-lg shadow-md hover:bg-yellow-600 transition">僅用分區</button>
                                <button data-query="cluster" class="px-4 py-2 text-sm font-semibold bg-green-500 text-white rounded-lg shadow-md hover:bg-green-600 transition">分區 + 叢集</button>
                            </div>
                            <div id="query-explanation" class="bg-slate-100 p-4 rounded-lg"></div>
                        </div>
                        <div><div class="chart-container"><canvas id="optimizationChart"></canvas></div></div>
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <h3 class="text-2xl mb-4">非正規化與巢狀欄位</h3>
                        <p class="mb-4 text-slate-600">為避免分散式系統中昂貴的 JOIN 操作，BigQuery 鼓勵將資料「預先組合」。使用 <code class="inline-code">STRUCT</code> (物件) 和 <code class="inline-code">ARRAY</code> (陣列) 來處理一對多關係，是提升效能的關鍵。</p>
                        <p class="mb-2 font-semibold">儲存樣貌：</p>
                        <div class="code-block code-block-light text-sm">
                            <p><b>user_id:</b> 'user_A'</p>
                            <p><b>cart:</b> [</p>
                            <p class="ml-4">{<b>product_id:</b> 'P101', <b>qty:</b> 1},</p>
                            <p class="ml-4">{<b>product_id:</b> 'P203', <b>qty:</b> 2}</p>
                            <p>]</p>
                        </div>
                        <p class="mt-4 mb-2 font-semibold">查詢方式 (<code class="inline-code">UNNEST</code>)：</p>
                        <pre><code>SELECT user_id, item.product_id, item.qty
FROM carts, UNNEST(cart) AS item;</code></pre>
                        <p class="mt-4 mb-2 font-semibold">查詢結果：</p>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left">
                                <thead class="bg-slate-100"><tr><th class="p-2">user_id</th><th class="p-2">product_id</th><th class="p-2">qty</th></tr></thead>
                                <tbody>
                                    <tr class="border-b"><td class="p-2">user_A</td><td class="p-2">P101</td><td class="p-2">1</td></tr>
                                    <tr class="border-b"><td class="p-2">user_A</td><td class="p-2">P203</td><td class="p-2">2</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card">
                        <h3 class="text-2xl mb-4">物化檢視表</h3>
                        <p class="mb-4 text-slate-600">對於重複性高、計算成本也高的查詢，可以建立物化檢視表 (Materialized View)。BigQuery 會自動預先計算並快取結果，當底層資料變動時也會智慧更新，讓後續查詢能以極快速度回應。</p>
                        <p class="mb-2 font-semibold">適用場景：</p>
                        <ul class="list-disc list-inside text-slate-600 space-y-1">
                            <li>常用的 BI 儀表板摘要資料。</li>
                            <li>需要預先聚合的複雜查詢。</li>
                            <li>對查詢延遲有嚴格要求的應用。</li>
                        </ul>
                         <p class="mt-4 mb-2 font-semibold">範例：</p>
                         <pre><code>CREATE MATERIALIZED VIEW mv_hourly_sales AS
SELECT
  TIMESTAMP_TRUNC(time, HOUR) as hour,
  SUM(amount) AS total_sales
FROM transactions
GROUP BY 1;</code></pre>
                    </div>
                </div>
            </section>
            
            <section class="my-16">
                <div class="text-center mb-12"><h2 class="text-3xl md:text-4xl mb-4">資料保護與生態系</h2><p class="max-w-3xl mx-auto text-lg text-slate-600">了解 BigQuery 的內建保護機制，以及如何與其他工具整合並選擇最適合您的成本方案。</p></div>
                <div class="grid md:grid-cols-2 gap-8">
                    <div class="card">
                        <h3 class="text-2xl mb-4">資料回復：時間旅行 (Time Travel)</h3>
                        <p class="mb-4 text-slate-600">BigQuery 會自動保留過去 7 天內所有資料表的歷史版本。若不慎誤刪或修改資料，可使用 <code class="inline-code">FOR SYSTEM_TIME AS OF</code> 語法，輕鬆查詢特定時間點的資料並進行還原。</p>
                        <p class="mb-2 font-semibold">回復情境範例：</p>
                        <ol class="list-decimal list-inside text-slate-600 space-y-2">
                            <li><span class="font-semibold text-red-600">錯誤操作：</span>不小心更新了所有員工的薪資。
                                <pre class="mt-1"><code>-- 錯誤！忘記加 WHERE 條件
UPDATE employees SET salary = 50000;</code></pre>
                            </li>
                            <li><span class="font-semibold text-green-600">救援查詢：</span>查詢一小時前的資料狀態。
                                <pre class="mt-1"><code>SELECT * FROM employees
FOR SYSTEM_TIME AS OF
TIMESTAMP_SUB(CURRENT_TIMESTAMP(), INTERVAL 1 HOUR);</code></pre>
                            </li>
                        </ol>
                    </div>
                     <div class="card">
                        <h3 class="text-2xl mb-4">BI Engine & 成本方案</h3>
                        <p class="mb-4 text-slate-600"><strong>BI Engine</strong> 是一個高速的記憶體內分析服務，能為 Looker 等 BI 工具提供亞秒級的查詢延遲。</p>
                        <p class="mb-4 text-slate-600">根據您的查詢負載類型，選擇最划算的計費模式：</p>
                        <div class="flex items-center space-x-4 mb-4">
                            <span class="text-slate-500">偶發/探索性</span>
                            <label class="relative inline-flex items-center cursor-pointer">
                                <input type="checkbox" id="cost-toggle" class="sr-only peer">
                                <div class="w-14 h-7 bg-slate-200 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[4px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-6 after:w-6 after:transition-all peer-checked:bg-blue-600"></div>
                            </label>
                             <span class="text-slate-500">穩定/高併發</span>
                        </div>
                        <div id="cost-recommendation" class="bg-slate-100 p-4 rounded-lg transition-all duration-300">
                             <h4 class="font-semibold mb-2 text-yellow-800">推薦：隨用隨付 (On-Demand)</h4>
                             <p class="text-sm text-slate-600">適用於查詢量不固定、臨時性的分析任務。您只需為掃描的資料量付費。</p>
                        </div>
                    </div>
                 </div>
            </section>
        </div>

        <!-- Lab Guide Content -->
        <div id="lab-guide-content" class="hidden lab-guide-section">
             <header class="my-8 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-2 text-cyan-600">實驗室指南 📊</h2>
                <p class="text-xl text-slate-600">使用 BigQuery 與 Cloud Logging 分析 BigQuery 使用情況</p>
                <p class="mt-4 text-slate-500 max-w-3xl mx-auto">本指南將引導您如何利用 Cloud Logging 來檢視 BigQuery 的使用日誌，並設定一個匯出槽 (sink)，將這些日誌永久儲存到 BigQuery 中進行長期分析。</p>
            </header>

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">實驗流程圖</h3>
                <div class="mermaid">
                graph TD
                    A[🚀 任務 3: 執行查詢以產生日誌] --> B[📝 任務 4: 前往 Cloud Logging 尋找日誌];
                    B --> C[🔧 任務 4: 建立匯出槽(Sink)將日誌匯出至 BigQuery];
                    C --> D[🔄 任務 5: 執行更多範例查詢以產生新日誌];
                    D --> E[👁️ 任務 6: 回到 BigQuery 檢視匯入的日誌];
                    E --> F[✨ 任務 6: 建立一個 VIEW 來簡化日誌資料];
                    F --> G[📈 任務 6: 查詢 VIEW 以分析使用情況];
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">任務 1 & 2：前置作業與建立資料集</h3>
                <p class="mb-4 text-slate-500">首先，我們需要一個地方來存放從 Cloud Logging 匯出的日誌。</p>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl mb-2">1. 開啟 BigQuery</h4>
                        <p>在 Google Cloud Console 中，透過導覽選單 (<strong>Navigation menu</strong>) 進入 <strong>BigQuery</strong>。</p>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">2. 建立資料集 (Dataset)</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>在 <strong>Explorer</strong> 面板中，找到您的專案 (名稱以 <code>qwiklabs-gcp-</code> 開頭)，點擊旁邊的三個點。</li>
                            <li>選擇 <strong>Create dataset</strong>。</li>
                            <li>設定 <strong>Dataset ID</strong> 為 <code>bq_logs</code>。</li>
                            <li>點擊 <strong>Create Dataset</strong>。</li>
                        </ol>
                    </div>
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">任務 3：執行一筆查詢以產生紀錄</h3>
                <p class="mb-4 text-slate-500">為了讓我們在 Cloud Logging 中能看到東西，先來執行一筆簡單的查詢。</p>
                <ol class="list-decimal list-inside space-y-2 pl-4 mb-4 text-slate-600">
                    <li>將以下查詢複製並貼到 BigQuery <strong>查詢編輯器 (Query editor)</strong> 中：</li>
                </ol>
                <pre><code>SELECT current_date</code></pre>
                <ol class="list-decimal list-inside space-y-2 pl-4 mt-4 text-slate-600" start="2">
                    <li>點擊 <strong>RUN</strong>。</li>
                </ol>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">任務 4：設定從 Cloud Logging 匯出日誌</h3>
                <p class="mb-4 text-slate-500">現在，我們將設定一個「匯出槽」(Sink)，它會自動把符合條件的日誌從 Cloud Logging 傳送到我們剛建立的 BigQuery 資料集。</p>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl mb-2">1. 前往 Logs Explorer</h4>
                        <p>在導覽選單中，選擇 <strong>Logging > Logs Explorer</strong>。</p>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">2. 篩選 BigQuery 日誌</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>在 <strong>Resource</strong> 下拉選單中，選擇 <strong>BigQuery</strong>，然後點擊 <strong>Apply</strong>。</li>
                            <li>點擊右上角的 <strong>Run query</strong>。您應該會看到剛剛執行查詢所產生的日誌。</li>
                            <li>找到包含 <code class="inline-code">jobservice.jobcompleted</code> 的日誌條目，點擊它，然後選擇 <strong>Show matching entries</strong>。這會自動幫您設定好篩選條件。</li>
                        </ol>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">3. 建立匯出槽 (Create Sink)</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>在右上角的 <strong>Actions</strong> 下拉選單中，點擊 <strong>Create sink</strong>。</li>
                            <li><strong>Sink name</strong>: 輸入 <code>JobComplete</code>，然後點擊 <strong>NEXT</strong>。</li>
                            <li><strong>Select sink service</strong>: 選擇 <strong>BigQuery dataset</strong>。</li>
                            <li><strong>Select BigQuery dataset (Destination)</strong>: 選擇我們剛剛建立的 <code>bq_logs</code>。</li>
                            <li>保留其餘設定為預設值，點擊 <strong>Create Sink</strong>。</li>
                        </ol>
                    </div>
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">任務 5：執行範例查詢以填充日誌</h3>
                <p class="mb-4 text-slate-500">為了讓新的日誌中有資料可供分析，請執行以下幾個查詢。</p>
                <ol class="list-decimal list-inside space-y-2 pl-4 mb-4 text-slate-600">
                    <li>開啟 <strong>Cloud Shell</strong>。</li>
                    <li>將以下 <code>bq</code> 指令<strong>逐一</strong>複製貼上到 Cloud Shell 中並執行。</li>
                </ol>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-lg font-semibold">查詢一：</h4>
                        <pre><code>bq query --location=us --use_legacy_sql=false --use_cache=false 'SELECT fullName, AVG(CL.numberOfYears) avgyears FROM `qwiklabs-resources.qlbqsamples.persons_living`, UNNEST(citiesLived) as CL GROUP BY fullname'</code></pre>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold">查詢二：</h4>
                        <pre><code>bq query --location=us --use_legacy_sql=false --use_cache=false 'select month, avg(mean_temp) as avgtemp from `qwiklabs-resources.qlweather_geo.gsod` where station_number = 947680 and year = 2010 group by month order by month'</code></pre>
                    </div>
                    <div>
                        <h4 class="text-lg font-semibold">查詢三：</h4>
                        <pre><code>bq query --location=us --use_legacy_sql=false --use_cache=false 'select CONCAT(departure_airport, "-", arrival_airport) as route, count(*) as numberflights from `bigquery-samples.airline_ontime_data.airline_id_codes` ac, `qwiklabs-resources.qlairline_ontime_data.flights` fl where ac.code = fl.airline_code and regexp_contains(ac.airline , r"Alaska") group by 1 order by 2 desc LIMIT 10'</code></pre>
                    </div>
                </div>
            </section>

            <hr class="border-slate-200 my-8">

            <section class="mb-12 card">
                <h3 class="text-2xl mb-4">任務 6：在 BigQuery 中檢視與分析日誌</h3>
                <p class="mb-4 text-slate-500">日誌已經透過 Sink 進入 BigQuery，現在讓我們來看看成果。</p>
                <div class="space-y-6">
                    <div>
                        <h4 class="text-xl mb-2">1. 尋找日誌資料表</h4>
                        <ol class="list-decimal list-inside space-y-2 pl-4 text-slate-600">
                            <li>回到 <strong>BigQuery</strong> 介面。</li>
                            <li>在 <strong>Explorer</strong> 面板中，展開您的專案及 <code>bq_logs</code> 資料集。</li>
                            <li>您會看到一個新建立的資料表，名稱類似 <code class="inline-code">cloudaudit_googleapis_com_data_access_...</code>。</li>
                            <li class="text-amber-600"><strong>注意：</strong> 日誌是透過串流方式寫入的，所以點擊 <strong>Preview</strong> 可能暫時看不到最新資料，但資料已經可以被查詢。</li>
                        </ol>
                    </div>
                    <div>
                        <h4 class="text-xl mb-2">2. 建立 VIEW 簡化資料</h4>
                        <p class="mb-4 text-slate-500">原始的日誌資料表欄位非常多且複雜。為了方便分析，我們建立一個 <strong>VIEW (檢視表)</strong> 來抽取重要欄位並做一些基本計算。</p>
                        <ol class="list-decimal list-inside space-y-2 pl-4 mb-4 text-slate-600">
                            <li>點擊 <strong>+ (Compose new query)</strong>，貼上並執行以下 SQL：</li>
                        </ol>
                        <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 mb-4" role="alert">
                          <p class="font-bold">⚠️ 重要提示：</p>
                          <p>請務必將 <code class="inline-code">`Project ID.bq_logs...`</code> 中的 <code>Project ID</code> 替換為您實驗室的<strong>實際專案 ID</strong>。</p>
                        </div>
                        <pre><code class="language-sql">CREATE OR REPLACE VIEW
  bq_logs.v_querylogs AS
SELECT
  resource.labels.project_id,
  protopayload_auditlog.authenticationInfo.principalEmail,
  protopayload_auditlog.servicedata_v1_bigquery.jobCompletedEvent.job.jobConfiguration.query.query,
  protopayload_auditlog.servicedata_v1_bigquery.jobCompletedEvent.job.jobConfiguration.query.statementType,
  protopayload_auditlog.servicedata_v1_bigquery.jobCompletedEvent.job.jobStatus.error.message,
  protopayload_auditlog.servi